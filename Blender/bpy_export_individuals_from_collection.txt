"""
This Blender Python script exports each selected object to a separate file. 
Files are saved in the current directory of the Blender project.
"""

import bpy
import os

# The absolute path of the current Blender project directory
export_path = bpy.path.abspath("//")

# Possible formats: GLB, GLTF_EMBEDDED, GLTF_SEPARATE
# Note: The export_texture_dir="" argument below ensures that textures are not embedded in the .glb file.
#           Remove this argument to embed textures with glb files, or when using GLTF_EMBEDDED.
export_format = "GLB"

# All objects in the current Blender scene
objects = bpy.data.objects

for obj in objects:
	if obj.select_get():
		export_filename = os.path.join(export_path, f"{obj.name}.glb")
		bpy.ops.export_scene.gltf(filepath=export_filename, export_format=export_format, use_selection=True, export_texture_dir="")
